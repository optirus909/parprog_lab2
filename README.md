# Лабораторная работа 2 по параллельному программированию

## Вариант общий
__Реализация__: `2lab_parallel_main.c`

![Boost plot](https://github.com/optirus909/parprog_lab2/blob/main/main_boost.png)
<div align="center">
    График зависимости ускорения от числа процессов
</div>


## Вариант 1г
__Реализация__: `не успел`

```c
for (i = 0; i < ISIZE; i++)
{
  for (j = 0; j < JSIZE; j++)
  { 
    a[i][j] = 10*i +j;
  } 
}

for (i = 1; i < ISIZE - 1; i++)
{ 
  for (j = 3; j < JSIZE - 1; j++)
  {
    a[i][j] = sin(0.00001*a[i - 1][j - 3]);
  }
}
```

Нормализуем циклы, т.е приведем их к виду

```c
for (i = 0; i < i_fin; i++)
{ 
  for (j = 0; j < j_fin; j++)
  {
    ....
  }
}
```

и вычислим вектор расстояний зависимости и вектор направлений.

```math
D = (i, j) - (i-1, j-3) = (1, 3)
d = (<, <)
```
Тут присутствует истинная зависимость. При этом внутренний цикл не содержит зависимостей и может быть без ограничений распареллелен. При таком распараллеливании требуется барьерная синхронизация по окончании внутреннего цикла. Распараллеливание по внешнему циклу и двум циклам невозможно. Внутренний и внешний цикл при распараллеливании можно менять местами. Также я реализовал динамическое выделение памяти.

График зависимости ускорения от числа процессов:
[Должен быть тут, но я его не успел сделать]

## Вариант 1д

```c
for (i = 0; i < ISIZE; i++)
{
  for (j = 0; j < JSIZE; j++)
  { 
    a[i][j] = 10*i +j;
  } 
}

for (i = 1; i < ISIZE - 1; i++)
{ 
  for (j = 6; j < JSIZE - 1; j++)
  {
    a[i][j] = sin(0.00001*a[i + 1][j - 6]);
  }
}
```

__Реализация__: `2lab_parallel_1d.c`

Аналогично 1г:

```math
D = (i, j) - (i+1, j-6) = (-1, 6)
d = (>, <)
```
Тут присутствует антизависимость. При этом внутренний цикл может быть распараллелен по 6 или меньше процессам. Распараллеливание по внешнему циклу или по двум направлениям допустимо при предварительном резервировании входных данных. Также я реализовал динамическое выделение памяти.
(Ниже график для распараллеливания по внешнему циклу)

![Boost plot](https://github.com/optirus909/parprog_lab2/blob/main/d_boost.png)
<div align="center">
    График зависимости ускорения от числа процессов
</div>

